"use strict";(self["webpackChunkalinea_ui"]=self["webpackChunkalinea_ui"]||[]).push([[267],{394:(t,e,l)=>{l.d(e,{Z:()=>v});var s=l(3673),a=l(2323);const i={class:"shadow-1"},n={class:"row no-wrap items-center"},o={class:"col ellipsis text-weight-light text-capitalize"},d={class:"row no-wrap items-center"},r={class:"col ellipsis text-weight-light text-smaller text-primary"},u={class:"q-btn q-btn--dense q-btn__content q-btn--outline q-btn--rectangle q-mr-sm"};function c(t,e,l,c,p,m){const h=(0,s.up)("q-img"),g=(0,s.up)("q-card-section"),w=(0,s.up)("q-card"),b=(0,s.up)("q-btn"),f=(0,s.up)("q-checkbox"),q=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.iD)("div",{class:(0,a.C_)("row"+l.classes)},[t.isNil(l.data)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(w,{key:0,class:"book-item bg-transparent q-my-xs q-mx-sm",flat:""},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s.wy)((0,s.Wm)(h,{src:m.getThumbnail,ratio:2/3,class:"book-item-img rounded-img shadow-1",clickable:"",onClick:e[0]||(e[0]=t=>m.onClickEvent())},null,8,["src"]),[[q]])]),"simple"===l.mode?((0,s.wg)(),(0,s.j4)(g,{key:0,class:"q-pa-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",o,(0,a.zw)(m.getTitle),1)]),(0,s._)("div",d,[(0,s._)("div",r,(0,a.zw)(m.getAuthor),1)])])),_:1})):(0,s.kq)("",!0)])),_:1})),"detail"===l.mode?((0,s.wg)(),(0,s.j4)(w,{key:1,flat:"",class:"bg-transparent col fit",style:{width:"360px !important"}},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{class:"text-capitalize text-h6 ellipsis title q-py-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(m.getTitle),1)])),_:1}),(0,s.Wm)(g,{class:"col ellipsis text-weight-light text-small q-py-xs text-primary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(m.getAuthor),1)])),_:1}),(0,s.Wm)(g,{class:"ellipsis-2-lines text-weight-light q-pb-sm",style:{height:"60px"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(m.getDescription),1)])),_:1}),t.isAuthenticated&&!l.readonly?((0,s.wg)(),(0,s.j4)(g,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{dense:"",outline:"",class:"q-px-sm q-mr-sm",icon:"la la-pencil",label:t.$t("edit"),onClick:e[1]||(e[1]=t=>m.onEditEvent())},null,8,["label"]),(0,s.Wm)(b,{dense:"",outline:"",class:"q-px-sm q-mr-sm",icon:"la la-trash",label:t.$t("delete"),onClick:e[2]||(e[2]=t=>m.onDeleteEvent())},null,8,["label"]),(0,s._)("div",u,[(0,s.Wm)(f,{color:"positive",dense:"",class:"q-px-sm",modelValue:m.getIsPublished,"onUpdate:modelValue":e[3]||(e[3]=t=>m.getIsPublished=t),label:t.$t(m.getIsPublished?"published":"private"),onClick:e[4]||(e[4]=t=>m.getIsPublished?m.onUnpublishEvent():m.onPublishEvent())},null,8,["modelValue","label"])])])),_:1})):((0,s.wg)(),(0,s.j4)(g,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{dense:"",size:"sm",flat:"",class:"q-px-sm q-mr-sm text-primary",label:t.$t("read_more"),onClick:e[5]||(e[5]=t=>m.onEditEvent())},null,8,["label"])])),_:1}))])),_:1})):(0,s.kq)("",!0)],2)}l(246);const p={name:"BookItem",props:{readonly:{type:Boolean,default:!1},data:{type:Object,required:!0},col:{type:Number,required:!1,default:12},classes:{type:String,required:!1,default:""},to:{type:String},mode:{type:String,required:!1,default:"simple"},onEdit:{type:Function,default:()=>{console.log("edit")}},onDelete:{type:Function,default:()=>{console.log("delete")}},onPublish:{type:Function,default:()=>{console.log("pulbish")}},onUnpublish:{type:Function,default:()=>{console.log("unpublish")}},onAddChapter:{type:Function,default:()=>{console.log("add chapter")}}},data(){return{published:!1}},methods:{onClickEvent(){this.$router.push(this.to)},onEditEvent(){this.onEdit()},onDeleteEvent(){this.onDelete()},onPublishEvent(){this.onPublish()},onUnpublishEvent(){this.onUnpublish()},onAddChapterEvent(){this.onAddChapter()}},mounted(){this.published=this.getIsPublished},computed:{getTitle(){return void 0!==this.data&&null!==this.data?this.data.title:""},getAuthor(){return void 0!==this.data&&null!==this.data&&void 0!==this.data.author&&null!==this.data.author?this.data.author.name:null},getDescription(){return void 0!==this.data&&null!==this.data?this.data.description:null},getThumbnail(){return this.isNotEmpty(this.data.cover_img)?this.data.cover_img[0].thumbnail_url:this.config.defaultImageURL},getIsPublished(){return!this.isNil(this.data.status)&&"STORY_STATUS_RELEASED"===this.data.status.code},getTo(){return this.to}}};var m=l(4260),h=l(151),g=l(4027),w=l(5589),b=l(3002),f=l(5735),q=l(6489),y=l(7518),_=l.n(y);const k=(0,m.Z)(p,[["render",c],["__scopeId","data-v-3c431cce"]]),v=k;_()(p,"components",{QCard:h.Z,QImg:g.Z,QCardSection:w.Z,QBtn:b.Z,QCheckbox:f.Z}),_()(p,"directives",{Ripple:q.Z})},3267:(t,e,l)=>{l.r(e),l.d(e,{default:()=>x});var s=l(3673);function a(t,e,l,a,i,n){const o=(0,s.up)("BookItem"),d=(0,s.up)("q-virtual-scroll"),r=(0,s.up)("Widget"),u=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(u,{padding:"",class:"q-mx-auto x-default-maxwidth"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{title:t.$t("recommended")},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{items:t.getStories,"virtual-scroll-horizontal":"",class:"hide-native-scrollbar"},{default:(0,s.w5)((({item:t})=>[(0,s.Wm)(o,{data:t,mode:"simple",readonly:!0,classes:"q-mr-md",to:"/story/"+t.story_uid},null,8,["data","to"])])),_:1},8,["items"])])),_:1},8,["title"]),(0,s.Wm)(r,{title:t.$t("refined_search")},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{items:t.getStories,"virtual-scroll-horizontal":"",class:"hide-native-scrollbar"},{default:(0,s.w5)((({item:t})=>[(0,s.Wm)(o,{data:t,mode:"simple",readonly:!0,classes:"q-mr-md"},null,8,["data"])])),_:1},8,["items"])])),_:1},8,["title"])])),_:1})}var i=l(3617),n=l(2323);const o={class:"text-primary title text-italic text-h6 text-uppercase"},d=(0,s._)("a",{href:"#"}," more.. ",-1);function r(t,e,l,a,i,r){const u=(0,s.up)("q-card-section"),c=(0,s.up)("q-btn"),p=(0,s.up)("q-card");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(p,{flat:"",class:"bg-transparent"},{default:(0,s.w5)((()=>[null!=r.getTitle?((0,s.wg)(),(0,s.j4)(u,{key:0,horizontal:"",class:"row q-mt-sm text-capitalize"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"col q-px-none"},{default:(0,s.w5)((()=>[(0,s._)("div",o,(0,n.zw)(r.getTitle),1)])),_:1}),r.getHasMore?((0,s.wg)(),(0,s.j4)(u,{key:0,class:"col-1"},{default:(0,s.w5)((()=>[d])),_:1})):(0,s.kq)("",!0),t.isNil(l.action)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(u,{key:1,class:"q-px-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{color:"primary",class:"q-px-md",icon:"la la-plus",dense:"",outline:"",onClick:e[0]||(e[0]=t=>l.action())},{default:(0,s.w5)((()=>[(0,s.Uk)((0,n.zw)(l.actionLabel),1)])),_:1})])),_:1})),t.isNotEmpty(l.actions)?((0,s.wg)(),(0,s.j4)(u,{key:2,class:"q-px-none"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actions,((t,e)=>((0,s.wg)(),(0,s.j4)(c,{key:e,label:t.name,color:"primary",class:"q-px-md q-ml-sm",icon:t.icon,dense:"",outline:"",onClick:e=>t.action()},null,8,["label","icon","onClick"])))),128))])),_:1})):(0,s.kq)("",!0)])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(u,{class:"q-py-sm q-pa-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{flat:"",class:"bg-transparent"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"q-px-none q-py-none q-pb-lg"},{default:(0,s.w5)((()=>[(0,s.WI)(t.$slots,"default")])),_:3})])),_:3})])),_:3})])),_:3})])}const u={name:"Widget",props:{title:String,classes:String,hasMore:{type:Boolean,default:!1},action:{type:Function,default:null},actions:{type:Array,default:null},actionLabel:{type:String,default:"add"}},setup(){return{}},computed:{getTitle(){return this.title},getClasses(){return this.classes},getHasMore(){return this.hasMore}}};var c=l(4260),p=l(151),m=l(5589),h=l(3002),g=l(7518),w=l.n(g);const b=(0,c.Z)(u,[["render",r]]),f=b;w()(u,"components",{QCard:p.Z,QCardSection:m.Z,QBtn:h.Z});var q=l(394);const y={name:"Stories",components:{Widget:f,BookItem:q.Z},mounted(){this.$store.dispatch("model/fetchStories")},computed:{...(0,i.Se)({getStories:"model/getStories"})}};var _=l(4379),k=l(9751);const v=(0,c.Z)(y,[["render",a]]),x=v;w()(y,"components",{QPage:_.Z,QVirtualScroll:k.Z})}}]);