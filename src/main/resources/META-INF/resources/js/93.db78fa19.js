"use strict";(self["webpackChunkalinea_ui"]=self["webpackChunkalinea_ui"]||[]).push([[93],{394:(t,e,l)=>{l.d(e,{Z:()=>v});var a=l(3673),s=l(2323);const i={class:"shadow-1"},n={class:"row no-wrap items-center"},o={class:"col ellipsis text-weight-light text-capitalize"},r={class:"row no-wrap items-center"},d={class:"col ellipsis text-weight-light text-smaller text-primary"},u={class:"q-btn q-btn--dense q-btn__content q-btn--outline q-btn--rectangle q-mr-sm"};function c(t,e,l,c,p,h){const m=(0,a.up)("q-img"),g=(0,a.up)("q-card-section"),w=(0,a.up)("q-card"),y=(0,a.up)("q-btn"),b=(0,a.up)("q-checkbox"),f=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",{class:(0,s.C_)("row"+l.classes)},[t.isNil(l.data)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(w,{key:0,class:"book-item bg-transparent q-my-xs q-mx-sm",flat:""},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a.wy)((0,a.Wm)(m,{src:h.getThumbnail,ratio:2/3,class:"book-item-img rounded-img shadow-1",clickable:"",onClick:e[0]||(e[0]=t=>h.onClickEvent())},null,8,["src"]),[[f]])]),"simple"===l.mode?((0,a.wg)(),(0,a.j4)(g,{key:0,class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",o,(0,s.zw)(h.getTitle),1)]),(0,a._)("div",r,[(0,a._)("div",d,(0,s.zw)(h.getAuthor),1)])])),_:1})):(0,a.kq)("",!0)])),_:1})),"detail"===l.mode?((0,a.wg)(),(0,a.j4)(w,{key:1,flat:"",class:"bg-transparent col fit",style:{width:"360px !important"}},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"text-capitalize text-h6 ellipsis title q-py-xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(h.getTitle),1)])),_:1}),(0,a.Wm)(g,{class:"col ellipsis text-weight-light text-small q-py-xs text-primary"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(h.getAuthor),1)])),_:1}),(0,a.Wm)(g,{class:"ellipsis-2-lines text-weight-light q-pb-sm",style:{height:"60px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(h.getDescription),1)])),_:1}),t.isAuthenticated&&!l.readonly?((0,a.wg)(),(0,a.j4)(g,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{dense:"",outline:"",class:"q-px-sm q-mr-sm",icon:"la la-pencil",label:t.$t("edit"),onClick:e[1]||(e[1]=t=>h.onEditEvent())},null,8,["label"]),(0,a.Wm)(y,{dense:"",outline:"",class:"q-px-sm q-mr-sm",icon:"la la-trash",label:t.$t("delete"),onClick:e[2]||(e[2]=t=>h.onDeleteEvent())},null,8,["label"]),(0,a._)("div",u,[(0,a.Wm)(b,{color:"positive",dense:"",class:"q-px-sm",modelValue:h.getIsPublished,"onUpdate:modelValue":e[3]||(e[3]=t=>h.getIsPublished=t),label:t.$t(h.getIsPublished?"published":"private"),onClick:e[4]||(e[4]=t=>h.getIsPublished?h.onUnpublishEvent():h.onPublishEvent())},null,8,["modelValue","label"])])])),_:1})):((0,a.wg)(),(0,a.j4)(g,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{dense:"",size:"sm",flat:"",class:"q-px-sm q-mr-sm text-primary",label:t.$t("read_more"),onClick:e[5]||(e[5]=t=>h.onEditEvent())},null,8,["label"])])),_:1}))])),_:1})):(0,a.kq)("",!0)],2)}l(246);const p={name:"BookItem",props:{readonly:{type:Boolean,default:!1},data:{type:Object,required:!0},col:{type:Number,required:!1,default:12},classes:{type:String,required:!1,default:""},to:{type:String},mode:{type:String,required:!1,default:"simple"},onEdit:{type:Function,default:()=>{console.log("edit")}},onDelete:{type:Function,default:()=>{console.log("delete")}},onPublish:{type:Function,default:()=>{console.log("pulbish")}},onUnpublish:{type:Function,default:()=>{console.log("unpublish")}},onAddChapter:{type:Function,default:()=>{console.log("add chapter")}}},data(){return{published:!1}},methods:{onClickEvent(){this.$router.push(this.to)},onEditEvent(){this.onEdit()},onDeleteEvent(){this.onDelete()},onPublishEvent(){this.onPublish()},onUnpublishEvent(){this.onUnpublish()},onAddChapterEvent(){this.onAddChapter()}},mounted(){this.published=this.getIsPublished},computed:{getTitle(){return void 0!==this.data&&null!==this.data?this.data.title:""},getAuthor(){return void 0!==this.data&&null!==this.data&&void 0!==this.data.author&&null!==this.data.author?this.data.author.name:null},getDescription(){return void 0!==this.data&&null!==this.data?this.data.description:null},getThumbnail(){return this.isNotEmpty(this.data.cover_img)?this.data.cover_img[0].thumbnail_url:this.config.defaultImageURL},getIsPublished(){return!this.isNil(this.data.status)&&"STORY_STATUS_RELEASED"===this.data.status.code},getTo(){return this.to}}};var h=l(4260),m=l(151),g=l(4027),w=l(5589),y=l(3002),b=l(5735),f=l(6489),q=l(7518),_=l.n(q);const k=(0,h.Z)(p,[["render",c],["__scopeId","data-v-3c431cce"]]),v=k;_()(p,"components",{QCard:m.Z,QImg:g.Z,QCardSection:w.Z,QBtn:y.Z,QCheckbox:b.Z}),_()(p,"directives",{Ripple:f.Z})},1093:(t,e,l)=>{l.r(e),l.d(e,{default:()=>T});var a=l(3673);const s={id:"story",class:"q-mx-auto x-default-maxwidth"};function i(t,e,l,i,n,o){const r=(0,a.up)("BookItem"),d=(0,a.up)("SectionPanel"),u=(0,a.up)("q-separator"),c=(0,a.up)("ChapterList"),p=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(p,{padding:""},{default:(0,a.w5)((()=>[(0,a._)("section",s,[(0,a.Wm)(d,{moreUrl:"stories"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{data:t.getStory,mode:"detail",readonly:!0},null,8,["data"])])),_:1}),(0,a.Wm)(u,{class:"q-mb-lg"}),(0,a.Wm)(c,{data:o.getChapters,readonly:!0},null,8,["data"])])])),_:1})}var n=l(2323);const o={class:"text-h5 text-primary text-weight-bold text-capitalize"};function r(t,e,l,s,i,r){const d=(0,a.up)("q-card-section"),u=(0,a.up)("q-icon"),c=(0,a.up)("q-tooltip"),p=(0,a.up)("q-btn"),h=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(h,{class:"my-card x-card-tile q-my-lg bg-transparent",flat:""},{default:(0,a.w5)((()=>[t.isNil(t.getTitle)?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,horizontal:"",class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"col-11"},{default:(0,a.w5)((()=>[(0,a._)("div",o,(0,n.zw)(t.getTitle),1)])),_:1}),void 0!==t.getMoreURL?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"text-right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{flat:"",to:t.getMoreURL,dense:"","aria-label":t.getTitle},{default:(0,a.w5)((()=>[(0,a._)("span",null,[(0,a.Wm)(u,{name:"las la-ellipsis-h",class:"text-secondary",size:"sm"})]),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.$t("more")),1)])),_:1})])),_:1},8,["to","aria-label"])])),_:1})):(0,a.kq)("",!0)])),_:1})),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.WI)(t.$slots,"default")])),_:3})])),_:3})}const d=(0,a.aZ)({name:"SectionPanel",props:{title:String,moreUrl:String},setup(){return{}},computed:{getTitle(){return this.title},getMoreURL(){return this.moreUrl}}});var u=l(4260),c=l(151),p=l(5589),h=l(3002),m=l(4554),g=l(8870),w=l(7518),y=l.n(w);const b=(0,u.Z)(d,[["render",r]]),f=b;y()(d,"components",{QCard:c.Z,QCardSection:p.Z,QBtn:h.Z,QIcon:m.Z,QTooltip:g.Z});var q=l(394);function _(t,e,l,s,i,o){const r=(0,a.up)("q-item-section"),d=(0,a.up)("q-item-label"),u=(0,a.up)("q-item"),c=(0,a.up)("q-list"),p=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,[void 0!==l.data&&null!==l.data?((0,a.wg)(),(0,a.j4)(c,{key:0,dense:"",padding:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.data,((t,e)=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(u,{clickable:"",key:e,onClick:e=>o.goto(t.chapter_uid)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"max-width":"24px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e+1)+". ",1)])),_:2},1024),(0,a.Wm)(r,{class:"text-capitalize q-py-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.title),1)])),_:2},1024),(0,a.Wm)(d,{caption:"",lines:"2",class:"text-small text-weight-light text-grey"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.intro),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[p]]))),128))])),_:1})):(0,a.kq)("",!0)])}const k={name:"ChapterList",props:{data:{type:Array,dafault:[]},readonly:{type:Boolean,dafault:!1}},setup(){return{}},methods:{goto(t){this.$router.push(this.readonly?"/read/chapter/"+t:"/author/chapter/"+t)}}};var v=l(7011),x=l(3414),S=l(2035),C=l(2350),Z=l(6489);const W=(0,u.Z)(k,[["render",_]]),E=W;y()(k,"components",{QList:v.Z,QItem:x.Z,QItemSection:S.Z,QItemLabel:C.Z}),y()(k,"directives",{Ripple:Z.Z});var U=l(3617);const Q={name:"Story",components:{SectionPanel:f,BookItem:q.Z,ChapterList:E},created(){this.initStory()},methods:{initStory(){if(!this.isNil(this.$route.params.story_uid)){const t=this.$route.params.story_uid.split("&state=")[0];this.$store.dispatch("model/findStoryByUid",t)}}},computed:{...(0,U.Se)({getStory:"model/getStory"}),getChapters(){return void 0!==this.getStory&&null!==this.getStory?this.getStory.chapters:null}}};var z=l(4379),I=l(5869);const P=(0,u.Z)(Q,[["render",i]]),T=P;y()(Q,"components",{QPage:z.Z,QSeparator:I.Z})}}]);